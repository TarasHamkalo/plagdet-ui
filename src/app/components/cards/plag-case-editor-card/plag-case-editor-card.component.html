<div class="base">
  <div class="cases-control">
    <div class="header">
      <button mat-button (click)="onExport()" [disabled]="!canExport()">
        Export
      </button>
      <p *ngIf="!canExport()"><strong>Some offsets are invalid</strong></p>
    </div>
    <div class="cases-listing">
      @for (plagCase of plagCases(); track this.plagCaseId(plagCase)) {
        <app-plag-case-item [plagCaseMarking]="plagCase"
                            (deleteEventEmitter)="onPlagCaseDelete($event)"
                            (editEventEmitter)="onPlagCaseEdit($event)">

        </app-plag-case-item>
      }

    </div>
    <div class="footer">
      <button mat-stroked-button (click)="addPlagCase()">Add more</button>
    </div>
  </div>
  <div class="case-editor">
    @if (this.selectedPlagCase()) {
      <mat-card class="input-row">
        <mat-form-field appearance="outline" #form floatLabel="always">
          <mat-label>First Start</mat-label>
          <input matInput type="number"
                 [(ngModel)]="selectedPlagCase()!.first.start"
                 (ngModelChange)="collectChanges()"
                 (focus)="onFocusFirstStartField()"
                 placeholder="0"/>
        </mat-form-field>
        <div><h3>Starts</h3></div>
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Second Start</mat-label>
          <input matInput type="number"
                 [(ngModel)]="selectedPlagCase()!.second!.start"
                 (ngModelChange)="collectChanges()"
                 (focus)="onFocusSecondStartField()"
                 placeholder="0"/>
        </mat-form-field>
      </mat-card>

      <mat-card class="input-row">
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>First End</mat-label>
          <input matInput type="number"
                 [(ngModel)]="selectedPlagCase()!.first.end"
                 (ngModelChange)="collectChanges()"
                 (focus)="onFocusFirstEndField()"
                 placeholder="0"/>
        </mat-form-field>
        <div><h3>Ends</h3></div>
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Second End</mat-label>
          <input matInput type="number" [(ngModel)]="selectedPlagCase()!.second!.end"
                 (ngModelChange)="collectChanges()"
                 (focus)="onFocusSecondEndField()"
                 placeholder="0"/>
        </mat-form-field>
      </mat-card>

    } @else {
      <p>Selected plagiarism case will be displayed here</p>
    }
  </div>
</div>